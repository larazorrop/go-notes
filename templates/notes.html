<!-- templates/notes.html -->

<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{.Title}} - Go-Notes</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
    <div class="container">
        <main>
            <div class="d-flex align-items-center p-3 my-3 text-white bg-primary rounded shadow-sm">
                <div class="lh-1">
                    <h1 class="h6 mb-0 text-white lh-1">Notas de {{.Username}}</h1>
                </div>
                <div class="ms-auto">
                    <a href="/app/logout" class="btn btn-outline-light">Logout</a>
                </div>
            </div>

            <!-- Formulário para adicionar nova nota -->
            <div class="my-3 p-3 bg-body rounded shadow-sm">
                <form action="/app/notes/add" method="POST">
                    <div class="mb-3">
                        <label for="content" class="form-label">Nova Nota</label>
                        <textarea class="form-control" id="content" name="content" rows="3" required></textarea>
                    </div>
                    <button type="submit" class="btn btn-success">Adicionar Nota</button>
                </form>
            </div>

            <!-- Lista de notas existentes -->
            <div class="my-3 p-3 bg-body rounded shadow-sm">
                <h6 class="border-bottom pb-2 mb-0">As Tuas Notas</h6>
                {{range .Notes}}
                <div class="d-flex text-muted pt-3 border-bottom">
                    <p class="pb-3 mb-0 small lh-sm">
                        <strong class="d-block text-gray-dark">Criado em: {{.CreatedAt.Format "02 Jan 2006 15:04"}}</strong>
                        {{.Content}}
                    </p>
                    <div class="ms-auto d-flex">
                        <!-- Formulário para apagar a nota -->
                        <form action="/app/notes/delete/{{.ID}}" method="POST" onsubmit="return confirm('Tens a certeza?');" class="ms-2">
                            <button type="submit" class="btn btn-sm btn-outline-danger">Apagar</button>
                        </form>
                    </div>
                </div>
                {{else}}
                <p class="pt-3">Ainda não tens notas. Cria a tua primeira!</p>
                {{end}}
            </div>
        </main>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>